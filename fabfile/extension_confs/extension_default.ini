[main]
postgres_versions: ['14.5']
extensions: ['citus', 'hll', 'topn', 'tdigest', 'auto_explain']

[citus]
doc: Adds the citus extension to the instance in pg-latest
contrib: False
preload: True
configure: True
repo_url: https://github.com/citusdata/citus.git
default_git_ref: release-11.1
relative_test_path: ./src/test/regress

[hll]
doc: Adds the hll extension to the instance in pg-latest
contrib: False
preload: False
configure: False
repo_url: https://github.com/citusdata/postgresql-hll.git
default_git_ref: v2.16
relative_test_path: .

[topn]
doc: Adds the topn extension to the instance in pg-latest
contrib: False
preload: False
configure: False
repo_url: https://github.com/citusdata/postgresql-topn.git
default_git_ref: v2.5.0
relative_test_path: .

[tdigest]
doc: Adds the tdigest extension to the instance in pg-latest
contrib: False
preload: False
configure: False
repo_url: https://github.com/tvondra/tdigest.git
default_git_ref: v1.4.0
relative_test_path: .

[auto_explain]
doc: Adds the tdigest extension to the instance in pg-latest
contrib: True
preload: True
configure: False
relative_test_path: .


[test_cases]
test_count: 4

[test-1]
ext_to_test: hll
dep_order: citus,hll
test_command: make installcheck
conf_string: '''
    auto_explain.log_min_duration=0
    auto_explain.log_analyze=1
    auto_explain.log_buffers=1
    auto_explain.log_nested_statements=1
    '''

[test-2]
ext_to_test: topn
dep_order: citus,topn
test_command: make installcheck

[test-3]
ext_to_test: tdigest
dep_order: citus,tdigest
test_command: make installcheck

[test-4]
ext_to_test: citus
dep_order: citus,auto_explain
test_command: make check-vanilla
